"use strict";(self.webpackChunkadminDesign=self.webpackChunkadminDesign||[]).push([[488],{4488:(oe,w,a)=>{a.r(w),a.d(w,{AssemblyConstituencyModule:()=>te});var g=a(6895),A=a(3060),n=a(4006),T=a(5226),u=a.n(T),C=a(3561),c=a(5239),Z=a(2340),e=a(4650),U=a(3761),O=a(5683),_=a(9366),M=a(4543),f=a(9549),I=a(4144),b=a(4385),N=a(3238),h=a(6257),y=a(8255),S=a(7392),v=a(4859),x=a(6186);function P(i,r){1&i&&e._uU(0,"Fill out your name")}function B(i,r){if(1&i&&(e.TgZ(0,"mat-option",31),e._uU(1),e.qZA()),2&i){const o=r.$implicit;e.Q6J("value",o),e.xp6(1),e.Oqu(o)}}function F(i,r){if(1&i&&(e.TgZ(0,"mat-option",31),e._uU(1),e.qZA()),2&i){const o=r.$implicit;e.Q6J("value",o.pollingNumber),e.xp6(1),e.Oqu(o.pollingNumber)}}function q(i,r){if(1&i){const o=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(o);const l=e.oxw();return e.KtG(l.onSubmit())}),e._uU(1,"Submit"),e.qZA()}}function E(i,r){if(1&i){const o=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(o);const l=e.oxw();return e.KtG(l.updateMember())}),e._uU(1,"Update"),e.qZA()}}function R(i,r){1&i&&(e.TgZ(0,"th",23),e._uU(1,"Name"),e.qZA())}function J(i,r){1&i&&(e.TgZ(0,"th",23),e._uU(1,"Age"),e.qZA())}function L(i,r){1&i&&(e.TgZ(0,"th",23),e._uU(1,"Gender"),e.qZA())}function D(i,r){1&i&&(e.TgZ(0,"th",23),e._uU(1,"Email"),e.qZA())}function G(i,r){if(1&i&&(e.TgZ(0,"td",34),e._uU(1),e.qZA()),2&i){const o=e.oxw().$implicit;e.xp6(1),e.Oqu(o.personName)}}function H(i,r){if(1&i&&(e.TgZ(0,"td",34),e._uU(1),e.qZA()),2&i){const o=e.oxw().$implicit;e.xp6(1),e.Oqu(o.age)}}function Q(i,r){if(1&i&&(e.TgZ(0,"td",34),e._uU(1),e.qZA()),2&i){const o=e.oxw().$implicit;e.xp6(1),e.Oqu(o.gender)}}function Y(i,r){if(1&i&&(e.TgZ(0,"td",34),e._uU(1),e.qZA()),2&i){const o=e.oxw().$implicit;e.xp6(1),e.Oqu(o.email)}}function k(i,r){if(1&i){const o=e.EpF();e.TgZ(0,"tbody")(1,"tr",33),e.NdJ("dblclick",function(){const d=e.CHM(o).$implicit,m=e.oxw();return e.KtG(m.editVoters(d))}),e.TgZ(2,"td",34),e._uU(3),e.qZA(),e.YNc(4,G,2,1,"td",35),e.TgZ(5,"td",34),e._uU(6),e.qZA(),e.YNc(7,H,2,1,"td",35),e.YNc(8,Q,2,1,"td",35),e.YNc(9,Y,2,1,"td",35),e.qZA()()}if(2&i){const o=r.$implicit,t=r.index,l=e.oxw();e.xp6(3),e.Oqu(t+1),e.xp6(1),e.Q6J("ngIf",1==l.showName),e.xp6(2),e.Oqu(o.email),e.xp6(1),e.Q6J("ngIf",1==l.showAge),e.xp6(1),e.Q6J("ngIf",1==l.showGender),e.xp6(1),e.Q6J("ngIf",1==l.showEmail)}}function V(i,r){if(1&i&&(e.TgZ(0,"div",36)(1,"div",37)(2,"div",38),e._uU(3),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.qZA(),e._UZ(6,"br"),e._uU(7),e._UZ(8,"br"),e._uU(9),e._UZ(10,"br"),e._uU(11),e.qZA(),e.TgZ(12,"div",39)(13,"div"),e._uU(14),e.qZA(),e._UZ(15,"img",40),e.qZA()()),2&i){const o=r.$implicit,t=r.index,l=e.oxw();e.xp6(3),e.Oqu(t+1),e.xp6(2),e.hij("Name: ",o.personName,""),e.xp6(2),e.hij(" Guardian's Name: ",o.guardianName,""),e.xp6(2),e.AsE(" Age: ",o.age," Gender: ",o.gender,""),e.xp6(2),e.hij(" House No: ",o.houseNo," "),e.xp6(3),e.Oqu(o.voterId),e.xp6(1),e.Q6J("src",l.imageSrcVoter+""+o.personId+".jpg",e.LSH)}}let j=(()=>{class i{constructor(o,t,l,d){this.areaService=o,this.pollingStationService=t,this.authService=l,this.userRegistrationService=d,this.showBill=!1,this.isLinear=!1,this.genderList=["MALE","FEMALE","OTHERS"],this.isUpdateAble=!1,this.imageSrc="",this.imageSrcVoter="",this.imageSrcTable="",this.defaultPicture="",this.userForm=new n.nJ({id:new n.p4(null),personId:new n.p4(null,[n.kI.required]),parentId:new n.p4(null,[n.kI.required]),areaId:new n.p4(null),remark:new n.p4(null,[n.kI.required]),areaDescription:new n.p4(null,[n.kI.required]),email:new n.p4(null,[n.kI.required]),password:new n.p4(null,[n.kI.required])}),this.confirmation=["YES","NO"],this.cast=["GENERAL","ST","SC","OBC"],this.religion=["HINDUISM","CHRISTIANITY","JUDAISM","BUDDHISM","SIKHISM","SHINTO","CATHOLICISM","BAHAI FAITH","ZOROASTRIANISM","JAINISM","CONFUCIANISM","LUTHERANISM","PROTESTANTISM","TAOISM","RASTAFARI","EASTERN ORTHODOX CHURCH","SUNNI ISLAM","CHINESE FOLK RELIGION","BABISM","MODERN PAGANISM","SHIA ISLAM","WICCA","TRADITIONAL AFRICAN RELIGIONS"],this.showPhoto=!0,this.showName=!0,this.showMemberCode=!1,this.showGuardianName=!0,this.showAge=!0,this.showGender=!0,this.showPoliceStation=!1,this.showOcupation=!0,this.showReligion=!0,this.showEmail=!1,this.showMobileOne=!0,this.showMobileTwo=!1,this.showVoterId=!0,this.showAadharId=!0,this.showCast=!1,this.showPostOffice=!1,this.showHouseNo=!0,this.showRoadNo=!0,this.showPinCode=!1,this.showPollingNumber=!1,this.personForm=new n.nJ({personTypeId:new n.p4(null,[n.kI.required]),personName:new n.p4(null,[n.kI.required]),email:new n.p4(""),guardianName:new n.p4(""),religion:new n.p4(""),occupation:new n.p4(""),policeStation:new n.p4(""),cast:new n.p4(""),partNo:new n.p4(""),postOffice:new n.p4(null,[n.kI.required]),houseNo:new n.p4(""),district:new n.p4(""),pinCode:new n.p4(""),preferableCandidate:new n.p4(""),suggestion:new n.p4(""),prevVotingHistory:new n.p4(null,[n.kI.required]),satisfiedByPresentGov:new n.p4(null,[n.kI.required]),age:new n.p4(""),gender:new n.p4(null,[n.kI.required]),mobile1:new n.p4(""),mobile2:new n.p4(""),aadharId:new n.p4(""),roadName:new n.p4(null),voterId:new n.p4(""),pollingStationId:new n.p4("")}),this.pollingMembers=[],this.BASE_PUBLIC_URL=Z.N.BASE_PUBLIC_URL,this.PolingAgentByAssembly=[],this.printDivStyle={printBillDiv:{marginRight:"3px",marginLeft:"3px",marginTop:"5px"},table:{"border-collapse":"collapse",width:"100%"},label:{width:"100%"},div:{border:"1px  solid black"}},this.areaService.getStateListener().subscribe(m=>{this.states=m}),this.states=this.areaService.getstate(),this.defaultPicture=this.BASE_PUBLIC_URL+"/profile_pic/no_dp.png",this.imageSrcVoter=this.BASE_PUBLIC_URL+"/voter_pic/"}ngOnInit(){this.showBill=!1,this.loggedInUser=this.authService.userBehaviorSubject.value,this.pollingStationService.getPollingStationByAssemblyId(this.loggedInUser?.assemblyConstituencyId).subscribe(o=>{this.pollingStations=o.data}),this.userRegistrationService.getPolingAgentByAssembly(this.loggedInUser.uniqueId).subscribe(o=>{this.PolingAgentByAssembly=o.data})}exportexcel(){let o=document.getElementById("excel-table");const t=c.utils.table_to_sheet(o),l=c.utils.book_new();c.utils.book_append_sheet(l,t,"Sheet1"),c.writeFile(l,"test.xlsx")}clearForms(){this.personForm.reset(),this.userForm.reset(),this.file=File,this.isUpdateAble=!1}onSubmit(){u().fire({title:"Confirmation",text:"Do you sure to create user?",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, create It!"}).then(o=>{if(o.isConfirmed){const t=this.personForm.value,m=(new C.V).appendStr("1234").end(),s=new FormData;s.append("personTypeId",7),s.append("personName",t.personName),s.append("age",t.age),s.append("gender",t.gender),s.append("religion",t.religion),s.append("occupation",t.occupation),s.append("policeStation",t.policeStation),s.append("cast",t.cast),s.append("partNo",t.partNo),s.append("postOffice",t.postOffice),s.append("houseNo",t.houseNo),s.append("guardianName",t.guardianName),s.append("district",t.district),s.append("pinCode",t.pinCode),s.append("preferableCandidate",t.preferableCandidate),s.append("satisfiedByPresentGov",t.satisfiedByPresentGov),s.append("suggestion",t.suggestion),s.append("previousVotingHistory",t.prevVotingHistory),s.append("email",t.email),s.append("aadharId",t.aadharId),s.append("password",m),s.append("mobile1",t.mobile1),s.append("mobile2",t.mobile2),s.append("voterId",t.voterId),s.append("pollingStationId",t.pollingStationId),s.append("parentId",this.loggedInUser?.uniqueId),s.append("remark",this.userForm.value.remark),s.append("roadName",t.roadName),s.append("district",t.district),this.userRegistrationService.saveNewPollingByAssembly(s).subscribe(p=>{p.status?(this.voters=p.data,this.personForm.reset(),this.userForm.reset(),this.file=File,this.imageSrc=null,u().fire({position:"top-end",icon:"success",title:"User created",showConfirmButton:!1,timer:1e3}),this.PolingAgentByAssembly.unshift(p.data)):u().fire({position:"top-end",icon:"error",title:"Validation error",showConfirmButton:!1,timer:3e3})},p=>{console.log(p),console.log("data saving error",p)})}})}updateMember(){u().fire({title:"Confirmation",text:"Do you sure to create user?",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, create It!"}).then(o=>{if(o.isConfirmed){const t=this.personForm.value,m=(new C.V).appendStr("1234").end();this.userRegistrationService.updateExistingUser({personId:t.id,personTypeId:6,personName:t.personName,age:t.age,gender:t.gender,religion:t.religion,occupation:t.occupation,policeStation:t.policeStation,cast:t.cast,partNo:t.partNo,postOffice:t.postOffice,houseNo:t.houseNo,guardianName:t.guardianName,aadharId:t.aadharId,state:t.state,district:t.district,pinCode:t.pinCode,preferableCandidate:t.preferableCandidate,satisfiedByPresentGov:t.satisfiedByPresentGov,suggestion:t.suggestion,previousVotingHistory:t.prevVotingHistory,email:t.email,password:m,mobile1:t.mobile1,mobile2:t.mobile2,voterId:t.voterId,pollingStationId:t.pollingStationId,parentId:this.loggedInUser?.uniqueId,remark:this.userForm.value.remark,roadName:t.roadName}).subscribe(p=>{})}})}editVoters(o){this.personForm.patchValue({id:o.id,personName:o.personName,age:o.age,gender:o.gender,email:o.email,religion:o.religion,occupation:o.occupation,policeStation:o.policeStation,cast:o.cast,partNo:o.partNo,postOffice:o.postOffice,houseNo:o.houseNo,guardianName:o.guardianName,aadharId:o.aadharId,state:o.state,district:o.districtId,pinCode:o.pinCode,preferableCandidate:o.preferableCandidate,satisfiedByPresentGov:o.satisfiedByPresentGov,suggestion:o.suggestion,prevVotingHistory:o.previousVotingHistory,password:o.password,mobile1:o.mobile1,mobile2:o.mobile2,voterId:o.voterId,pollingStationId:o.pollingStationId,parentId:o.parentId,remark:o.remark,roadName:o.roadName}),console.log(o),this.imageSrc=this.imageSrcVoter+""+o.id+".jpg",this.isUpdateAble=!0}onChange(o){if(o.target.files[0].size/1024e3>2)return u().fire({position:"top-end",icon:"error",title:"Photo must be less than 2 mb",showConfirmButton:!1,timer:3e3}),void(this.file=File);this.file=o.target.files[0];var t=new FileReader;t.readAsDataURL(this.file),t.onload=l=>{this.imageSrc=t.result}}viewBill(){this.showBill=!this.showBill}changeShowStatus(o,t){this.showName="showName"===o?t:this.showName,this.showAge="showAge"===o?t:this.showAge,this.showEmail="showEmail"===o?t:this.showEmail,this.showMemberCode="showMemberCode"===o?t:this.showMemberCode,this.showGuardianName="showGuardianName"===o?t:this.showGuardianName,this.showGender="showGender"===o?t:this.showGender,this.showPoliceStation="showPoliceStation"===o?t:this.showPoliceStation,this.showOcupation="showOcupation"===o?t:this.showOcupation,this.showReligion="showReligion"===o?t:this.showReligion,this.showMobileOne="showMobileOne"===o?t:this.showMobileOne,this.showMobileTwo="showMobileTwo"===o?t:this.showMobileTwo,this.showVoterId="showVoterId"===o?t:this.showVoterId,this.showAadharId="showAadharId"===o?t:this.showAadharId,this.showCast="showCast"===o?t:this.showCast,this.showPostOffice="showPostOffice"===o?t:this.showPostOffice,this.showHouseNo="showHouseNo"===o?t:this.showHouseNo,this.showRoadNo="showRoadNo"===o?t:this.showRoadNo,this.showPinCode="showPinCode"===o?t:this.showPinCode,this.showPollingNumber="showPollingNumber"===o?t:this.showPollingNumber,this.showPhoto="showPhoto"===o?t:this.showPhoto}}return i.\u0275fac=function(o){return new(o||i)(e.Y36(U.T),e.Y36(O.u),e.Y36(_.e),e.Y36(M.p))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-assembly-constituency"]],decls:70,vars:17,consts:[[1,"container","pt-1",2,"background-color","rgb(255, 255, 255)","color","black !important",3,"hidden"],[2,"background-color","rgb(31, 111, 180) !important","color","black !important","border-radius","10px",3,"linear"],["stepper",""],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],[1,"d-flex"],[1,"col-9"],["appearance","fill"],["matInput","","placeholder","Last name, First name","formControlName","personName","required",""],["matInput","","placeholder","Your age","formControlName","age","required",""],["matInput","","placeholder","Email","formControlName","email","required",""],["matNativeControl","","required","","formControlName","gender"],[3,"value",4,"ngFor","ngForOf"],["matNativeControl","","required","","formControlName","pollingStationId"],[1,"fluid",2,"background-color","white","max-height","100px","margin","2%","text-align","right"],["test1","matMenu"],["type","file","name","filename",3,"disabled","change"],[1,"mr-2","bg-warning","btn",3,"click"],["type","submit","class","btn btn-info",3,"click",4,"ngIf"],[1,"card"],[1,"card-body","scroll",2,"max-width","100vw","overflow","scroll","border-radius","5px","background-color","rgba(27, 109, 197, 0.524)"],["id","excel-table",1,"table"],["scope","col",1,"text-center"],["class","text-center","scope","col",4,"ngIf"],[4,"ngFor","ngForOf"],["mat-stroked-button","","printSectionId","printDiv","ngxPrint","",1,"btn-primary",3,"printStyle"],["mat-stroked-button","",1,"btn-primary",3,"click"],[3,"hidden"],["id","printDiv",2,"font-size","xx-small !important"],["class","printDiv","style","border: #000000 solid; min-width: 200px; float: left !important; padding: 4px;",4,"ngFor","ngForOf"],[3,"value"],["type","submit",1,"btn","btn-info",3,"click"],[3,"dblclick"],["scope","row",1,"text-center","pt-3"],["class","text-center pt-3","scope","row",4,"ngIf"],[1,"printDiv",2,"border","#000000 solid","min-width","200px","float","left !important","padding","4px"],[1,"printDiv",2,"min-width","100px","max-width","100px !important","float","left !important","font-size","xx-small !important"],[2,"border","#000000 solid","text-align","right"],[1,"printDiv",2,"border","1px solid black !important","min-width","100px","float","left !important","text-align","right"],["alt","",2,"height","65px","width","40px","border","#000000 solid",3,"src"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"h3")(2,"u"),e._uU(3,"Create Polling Volunteer"),e.qZA()(),e.TgZ(4,"div")(5,"mat-stepper",1,2)(7,"mat-step",3)(8,"form",4),e.YNc(9,P,1,0,"ng-template",5),e.TgZ(10,"div",6)(11,"div",7)(12,"div")(13,"mat-form-field",8)(14,"mat-label"),e._uU(15,"NAME"),e.qZA(),e._UZ(16,"input",9),e.qZA(),e.TgZ(17,"mat-form-field",8)(18,"mat-label"),e._uU(19,"AGE"),e.qZA(),e._UZ(20,"input",10),e.qZA()(),e.TgZ(21,"div")(22,"mat-form-field",8)(23,"mat-label"),e._uU(24,"EMAIL"),e.qZA(),e._UZ(25,"input",11),e.qZA(),e.TgZ(26,"mat-form-field",8)(27,"mat-label"),e._uU(28,"GENDER"),e.qZA(),e.TgZ(29,"mat-select",12),e.YNc(30,B,2,2,"mat-option",13),e.qZA()()(),e.TgZ(31,"div")(32,"mat-form-field",8)(33,"mat-label"),e._uU(34,"POLLING NO."),e.qZA(),e.TgZ(35,"mat-select",14),e.YNc(36,F,2,2,"mat-option",13),e.qZA()()(),e._UZ(37,"div"),e.qZA(),e.TgZ(38,"div",15)(39,"mat-menu",null,16)(41,"input",17),e.NdJ("change",function(d){return t.onChange(d)}),e.qZA()()()(),e.TgZ(42,"div")(43,"button",18),e.NdJ("click",function(){return t.clearForms()}),e._uU(44,"Clear"),e.qZA(),e.YNc(45,q,2,0,"button",19),e.YNc(46,E,2,0,"button",19),e.qZA()()()()(),e.TgZ(47,"div",20)(48,"div",21)(49,"table",22)(50,"thead")(51,"tr")(52,"th",23),e._uU(53,"#"),e.qZA(),e.YNc(54,R,2,0,"th",24),e.TgZ(55,"th",23),e._uU(56,"Email"),e.qZA(),e.YNc(57,J,2,0,"th",24),e.YNc(58,L,2,0,"th",24),e.YNc(59,D,2,0,"th",24),e.qZA()(),e.YNc(60,k,10,6,"tbody",25),e.qZA()()()(),e.TgZ(61,"div")(62,"button",26)(63,"mat-icon"),e._uU(64,"print"),e.qZA()(),e.TgZ(65,"button",27),e.NdJ("click",function(){return t.exportexcel()}),e._uU(66,"Export to Excel"),e.qZA()(),e.TgZ(67,"div",28)(68,"div",29),e.YNc(69,V,16,8,"div",30),e.qZA()()),2&o&&(e.Q6J("hidden",t.showBill),e.xp6(5),e.Q6J("linear",t.isLinear),e.xp6(2),e.Q6J("stepControl",t.personForm),e.xp6(1),e.Q6J("formGroup",t.personForm),e.xp6(22),e.Q6J("ngForOf",t.genderList),e.xp6(6),e.Q6J("ngForOf",t.pollingStations),e.xp6(5),e.Q6J("disabled",1==t.isUpdateAble),e.xp6(4),e.Q6J("ngIf",0==t.isUpdateAble),e.xp6(1),e.Q6J("ngIf",1==t.isUpdateAble),e.xp6(8),e.Q6J("ngIf",1==t.showName),e.xp6(3),e.Q6J("ngIf",1==t.showAge),e.xp6(1),e.Q6J("ngIf",1==t.showGender),e.xp6(1),e.Q6J("ngIf",1==t.showEmail),e.xp6(1),e.Q6J("ngForOf",t.PolingAgentByAssembly),e.xp6(2),e.Q6J("printStyle",t.printDivStyle),e.xp6(5),e.Q6J("hidden",!t.showBill),e.xp6(2),e.Q6J("ngForOf",t.PolingAgentByAssembly))},dependencies:[g.sg,g.O5,n._Y,n.Fj,n.JJ,n.JL,n.Q7,f.KE,f.hX,n.sg,n.u,I.Nt,b.gD,N.ey,h.C0,h.VY,h.Vq,y.VK,S.Hw,v.lW,x.I],styles:[".scroll[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.scroll[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}.mat-stepper-horizontal[_ngcontent-%COMP%]{margin-top:8px}.mat-mdc-form-field[_ngcontent-%COMP%]{margin-top:16px}.mat-form-field[_ngcontent-%COMP%]{padding:5px}input[_ngcontent-%COMP%]{text-transform:uppercase}"]}),i})();const K=[{path:"",canActivate:[a(6300).c],component:j}];let z=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[A.Bz.forChild(K),A.Bz]}),i})();var X=a(3546),W=a(8796),ee=a(6709);let te=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[g.ez,z,n.u5,f.lN,n.UX,I.c,b.LD,X.QW,W.A0,ee.p9,h.T5,y.Tx,b.LD,N.Ng,S.Ps,v.ot,x.K]}),i})()}}]);