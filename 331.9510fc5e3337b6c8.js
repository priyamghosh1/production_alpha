"use strict";(self.webpackChunkadminDesign=self.webpackChunkadminDesign||[]).push([[331],{3331:(se,N,s)=>{s.r(N),s.d(N,{PollingVolunteerModule:()=>ie});var f=s(6895),A=s(3060),i=s(4006),M=s(5226),h=s.n(M),C=s(3561),_=s(2340),m=s(5239),e=s(4650),O=s(4543),B=s(9366),V=s(5683),F=s(3761),q=s(529),y=s(5620),c=s(9549),w=s(4144),b=s(4385),S=s(3238),g=s(6257),v=s(8255),x=s(7392),P=s(4859),T=s(6186);function R(n,r){1&n&&e._uU(0,"Fill out your name")}function E(n,r){if(1&n&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function J(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.onSubmit())}),e._uU(1,"Submit"),e.qZA()}}function D(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.updateMember())}),e._uU(1,"Update"),e.qZA()}}function G(n,r){1&n&&(e.TgZ(0,"th",21),e._uU(1,"Name"),e.qZA())}function L(n,r){1&n&&(e.TgZ(0,"th",21),e._uU(1,"Member code"),e.qZA())}function Y(n,r){1&n&&(e.TgZ(0,"th",21),e._uU(1,"Age"),e.qZA())}function H(n,r){1&n&&(e.TgZ(0,"th",21),e._uU(1,"Gender"),e.qZA())}function Q(n,r){1&n&&(e.TgZ(0,"th",21),e._uU(1,"pollingNumber"),e.qZA())}function k(n,r){if(1&n&&(e.TgZ(0,"td",32),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.personName)}}function j(n,r){if(1&n&&(e.TgZ(0,"td",32),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.memberCode)}}function $(n,r){if(1&n&&(e.TgZ(0,"td",32),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.age)}}function K(n,r){if(1&n&&(e.TgZ(0,"td",32),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.gender)}}function z(n,r){if(1&n&&(e.TgZ(0,"td",32),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.pollingNumber)}}function X(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"tbody")(1,"tr",31),e.NdJ("dblclick",function(){const p=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.editVoters(p))}),e.TgZ(2,"td",32),e._uU(3),e.qZA(),e.YNc(4,k,2,1,"td",33),e.TgZ(5,"td",32),e._uU(6),e.qZA(),e.YNc(7,j,2,1,"td",33),e.YNc(8,$,2,1,"td",33),e.YNc(9,K,2,1,"td",33),e.YNc(10,z,2,1,"td",33),e.qZA()()}if(2&n){const t=r.$implicit,o=r.index,l=e.oxw();e.xp6(3),e.Oqu(o+1),e.xp6(1),e.Q6J("ngIf",1==l.showName),e.xp6(2),e.Oqu(t.email),e.xp6(1),e.Q6J("ngIf",1==l.showMemberCode),e.xp6(1),e.Q6J("ngIf",1==l.showAge),e.xp6(1),e.Q6J("ngIf",1==l.showGender),e.xp6(1),e.Q6J("ngIf",1==l.showPollingNumber)}}function W(n,r){if(1&n&&(e.TgZ(0,"div",34)(1,"div",35)(2,"div",36),e._uU(3),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.qZA(),e._UZ(6,"br"),e._uU(7),e._UZ(8,"br"),e._uU(9),e._UZ(10,"br"),e._uU(11),e.qZA(),e.TgZ(12,"div",37)(13,"div"),e._uU(14),e.qZA(),e._UZ(15,"img",38),e.qZA()()),2&n){const t=r.$implicit,o=r.index,l=e.oxw();e.xp6(3),e.Oqu(o+1),e.xp6(2),e.hij("Name: ",t.personName,""),e.xp6(2),e.hij(" Guardian's Name: ",t.guardianName,""),e.xp6(2),e.AsE(" Age: ",t.age," Gender: ",t.gender,""),e.xp6(2),e.hij(" House No: ",t.houseNo," "),e.xp6(3),e.Oqu(t.voterId),e.xp6(1),e.Q6J("src",l.imageSrcVoter+""+t.personId+".jpg",e.LSH)}}const ee=[{path:"",component:(()=>{class n{constructor(t,o,l,p,u,a,d,I){this.userRegistrationService=t,this.authService=o,this.pollingStationService=l,this.formBuilder=p,this.areaService=u,this.http=a,this._formBuilder=d,this.commonService=I,this.personForm=new i.nJ({id:new i.p4(null),personTypeId:new i.p4(null,[i.kI.required]),personName:new i.p4(null,[i.kI.required]),email:new i.p4(null,[i.kI.required]),guardianName:new i.p4(""),religion:new i.p4(""),occupation:new i.p4(""),policeStation:new i.p4(""),cast:new i.p4(""),partNo:new i.p4(""),postOffice:new i.p4(""),houseNo:new i.p4(""),district:new i.p4(""),pinCode:new i.p4(null,[i.kI.required]),preferableCandidate:new i.p4(null,[i.kI.required]),suggestion:new i.p4(null,[i.kI.required]),prevVotingHistory:new i.p4(null,[i.kI.required]),satisfiedByPresentGov:new i.p4(null,[i.kI.required]),age:new i.p4(null,[i.kI.required]),gender:new i.p4(null,[i.kI.required]),mobile1:new i.p4(""),mobile2:new i.p4(null),aadharId:new i.p4(""),roadName:new i.p4(null),voterId:new i.p4(""),pollingStationId:new i.p4("")}),this.userForm=new i.nJ({id:new i.p4(null),personId:new i.p4(null,[i.kI.required]),parentId:new i.p4(null,[i.kI.required]),areaId:new i.p4(null),remark:new i.p4(null,[i.kI.required]),areaDescription:new i.p4(null,[i.kI.required]),email:new i.p4(null,[i.kI.required]),password:new i.p4(null,[i.kI.required])}),this.genderList=["MALE","FEMALE","OTHERS"],this.pollingGeneralMembers=[],this.showBill=!1,this.defaultPicture="",this.BASE_PUBLIC_URL=_.N.BASE_PUBLIC_URL,this.imageSrc="",this.imageSrcVoter="",this.imageSrcTable="",this.areas=[],this.pollingMembers=[],this.isUpdateAble=!1,this.volunteerByPolingAgent=[],this.isLinear=!1,this.confirmation=["YES","NO"],this.cast=["GENERAL","ST","SC","OBC"],this.religion=["HINDUISM","CHRISTIANITY","JUDAISM","BUDDHISM","SIKHISM","SHINTO","CATHOLICISM","BAHAI FAITH","ZOROASTRIANISM","JAINISM","CONFUCIANISM","LUTHERANISM","PROTESTANTISM","TAOISM","RASTAFARI","EASTERN ORTHODOX CHURCH","SUNNI ISLAM","CHINESE FOLK RELIGION","BABISM","MODERN PAGANISM","SHIA ISLAM","WICCA","TRADITIONAL AFRICAN RELIGIONS"],this.showPhoto=!0,this.showName=!0,this.showMemberCode=!1,this.showGuardianName=!0,this.showAge=!0,this.showGender=!0,this.showPoliceStation=!1,this.showOcupation=!0,this.showReligion=!0,this.showEmail=!1,this.showMobileOne=!0,this.showMobileTwo=!1,this.showVoterId=!0,this.showAadharId=!0,this.showCast=!1,this.showPostOffice=!1,this.showHouseNo=!0,this.showRoadNo=!0,this.showPinCode=!1,this.showPollingNumber=!1,this.boothVolunteer=[],this.printDivStyle={printDiv:{marginRight:"3px",marginLeft:"3px",marginTop:"5px"},table:{"border-collapse":"collapse",width:"100%"},label:{width:"100%"},div:{border:"1px  solid black"}},this.file=File,this.areaService.getStateListener().subscribe(ne=>{this.states=ne}),this.states=this.areaService.getstate(),this.defaultPicture=this.BASE_PUBLIC_URL+"/profile_pic/no_dp.png",this.imageSrcVoter=this.BASE_PUBLIC_URL+"/voter_pic/"}ngOnInit(){this.loggedInUser=this.authService.userBehaviorSubject.value,this.userRegistrationService.getAllGeneralMembersByPollingId(this.loggedInUser?.uniqueId).subscribe(t=>{this.pollingGeneralMembers=t.data}),this.userRegistrationService.getAllPersonByAssemblyId(this.loggedInUser?.assemblyConstituencyId).subscribe(t=>{this.pollingMembers=t.data}),this.pollingStationService.getPollingStationByAssemblyId(this.loggedInUser?.assemblyConstituencyId).subscribe(t=>{this.pollingStations=t.data}),this.userRegistrationService.getAllGeneralMembersByPollingIdListener().subscribe(t=>{this.pollingGeneralMembers=t}),this.userRegistrationService.getBoothByPolingAgent(this.loggedInUser.uniqueId).subscribe(t=>{this.volunteerByPolingAgent=t.data})}exportexcel(){let t=document.getElementById("excel-table");const o=m.utils.table_to_sheet(t),l=m.utils.book_new();m.utils.book_append_sheet(l,o,"Sheet1"),m.writeFile(l,"test.xlsx")}viewBill(){this.showBill=0==this.showBill}onChange(t){if(t.target.files[0].size/1024e3>2)return h().fire({position:"top-end",icon:"error",title:"Photo must be less than 2 mb",showConfirmButton:!1,timer:3e3}),void(this.file=File);this.file=t.target.files[0];var o=new FileReader;o.readAsDataURL(this.file),o.onload=l=>{this.imageSrc=o.result}}getAllArea(){this.areas=this.areaService.getArea(),this.areaService.getGameTypeListener().subscribe(t=>{this.areas=t})}clearForms(){this.personForm.reset(),this.userForm.reset(),this.file=File,this.isUpdateAble=!1}updateMember(){h().fire({title:"Confirmation",text:"Do you sure to create user?",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, create It!"}).then(t=>{if(t.isConfirmed){const o=this.personForm.value,u=(new C.V).appendStr("1234").end();this.userRegistrationService.updateExistingUser({personId:o.id,personTypeId:9,personName:o.personName,age:o.age,gender:o.gender,religion:o.religion,occupation:o.occupation,policeStation:o.policeStation,cast:o.cast,partNo:o.partNo,postOffice:o.postOffice,houseNo:o.houseNo,guardianName:o.guardianName,aadharId:o.aadharId,state:o.state,district:o.district,pinCode:o.pinCode,preferableCandidate:o.preferableCandidate,satisfiedByPresentGov:o.satisfiedByPresentGov,suggestion:o.suggestion,previousVotingHistory:o.prevVotingHistory,email:o.email,password:u,mobile1:o.mobile1,mobile2:o.mobile2,voterId:o.voterId,pollingStationId:o.pollingStationId,parentId:this.loggedInUser?.uniqueId,remark:this.userForm.value.remark,roadName:o.roadName}).subscribe(d=>{})}})}onSubmit(){h().fire({title:"Confirmation",text:"Do you sure to create user?",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, create It!"}).then(t=>{if(t.isConfirmed){const o=this.personForm.value,u=(new C.V).appendStr("1234").end(),a=new FormData;a.append("personTypeId",8),a.append("personName",o.personName),a.append("age",o.age),a.append("gender",o.gender),a.append("email",o.email),a.append("password",u),a.append("parentId",this.loggedInUser?.uniqueId),this.userRegistrationService.saveNewBoothMember(a).subscribe(d=>{d.status?(this.volunteerByPolingAgent.unshift(d.data),this.personForm.reset(),this.userForm.reset(),this.file=File,this.imageSrc=null,h().fire({position:"top-end",icon:"success",title:"User created",showConfirmButton:!1,timer:1e3})):h().fire({position:"top-end",icon:"error",title:"Validation error",showConfirmButton:!1,timer:3e3})},d=>{console.log(d),console.log("data saving error",d)})}})}changeShowStatus(t,o){this.showName="showName"===t?o:this.showName,this.showAge="showAge"===t?o:this.showAge,this.showEmail="showEmail"===t?o:this.showEmail,this.showMemberCode="showMemberCode"===t?o:this.showMemberCode,this.showGuardianName="showGuardianName"===t?o:this.showGuardianName,this.showGender="showGender"===t?o:this.showGender,this.showPoliceStation="showPoliceStation"===t?o:this.showPoliceStation,this.showOcupation="showOcupation"===t?o:this.showOcupation,this.showReligion="showReligion"===t?o:this.showReligion,this.showMobileOne="showMobileOne"===t?o:this.showMobileOne,this.showMobileTwo="showMobileTwo"===t?o:this.showMobileTwo,this.showVoterId="showVoterId"===t?o:this.showVoterId,this.showAadharId="showAadharId"===t?o:this.showAadharId,this.showCast="showCast"===t?o:this.showCast,this.showPostOffice="showPostOffice"===t?o:this.showPostOffice,this.showHouseNo="showHouseNo"===t?o:this.showHouseNo,this.showRoadNo="showRoadNo"===t?o:this.showRoadNo,this.showPinCode="showPinCode"===t?o:this.showPinCode,this.showPollingNumber="showPollingNumber"===t?o:this.showPollingNumber,this.showPhoto="showPhoto"===t?o:this.showPhoto}editVoters(t){this.personForm.patchValue({id:t.id,personName:t.personName,age:t.age,gender:t.gender,email:t.email,religion:t.religion,occupation:t.occupation,policeStation:t.policeStation,cast:t.cast,partNo:t.partNo,postOffice:t.postOffice,houseNo:t.houseNo,guardianName:t.guardianName,aadharId:t.aadharId,state:t.state,district:t.districtId,pinCode:t.pinCode,preferableCandidate:t.preferableCandidate,satisfiedByPresentGov:t.satisfiedByPresentGov,suggestion:t.suggestion,prevVotingHistory:t.previousVotingHistory,password:t.password,mobile1:t.mobile1,mobile2:t.mobile2,voterId:t.voterId,pollingStationId:t.pollingStationId,parentId:t.parentId,remark:t.remark,roadName:t.roadName}),console.log(t),this.imageSrc=this.imageSrcVoter+""+t.id+".jpg",this.isUpdateAble=!0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(O.p),e.Y36(B.e),e.Y36(V.u),e.Y36(i.QS),e.Y36(F.T),e.Y36(q.eN),e.Y36(i.QS),e.Y36(y.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-polling-volunteer"]],decls:66,vars:17,consts:[[1,"container","pt-1",2,"background-color","rgb(255, 255, 255)","color","black !important",3,"hidden"],[2,"background-color","rgb(31, 111, 180) !important","color","black !important","border-radius","10px",3,"linear"],["stepper",""],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],[1,"d-flex"],["appearance","fill"],["matInput","","placeholder","Last name, First name","formControlName","personName","required",""],["matInput","","placeholder","Your age","formControlName","age","required",""],["matNativeControl","","required","","formControlName","gender"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Email","formControlName","email","required",""],[1,"fluid",2,"background-color","white","max-height","100px","margin","2%","text-align","center"],["test1","matMenu"],["type","file","name","filename",3,"disabled","change"],[1,"mr-2","bg-warning","btn",3,"click"],["type","submit","class","btn btn-info",3,"click",4,"ngIf"],[1,"card"],[1,"card-body","scroll",2,"max-width","100vw","overflow","scroll","border-radius","5px","background-color","rgba(27, 109, 197, 0.524)"],["id","excel-table",1,"table"],["scope","col",1,"text-center"],["class","text-center","scope","col",4,"ngIf"],[4,"ngFor","ngForOf"],["mat-stroked-button","","printSectionId","printDiv","ngxPrint","",1,"btn-primary",3,"printStyle"],["mat-stroked-button","",1,"btn-primary",3,"click"],[3,"hidden"],["id","printDiv",2,"font-size","xx-small !important"],["class","printDiv","style","border: #000000 solid; min-width: 200px; float: left !important; padding: 4px;",4,"ngFor","ngForOf"],[3,"value"],["type","submit",1,"btn","btn-info",3,"click"],[3,"dblclick"],["scope","row",1,"text-center","pt-3"],["class","text-center pt-3","scope","row",4,"ngIf"],[1,"printDiv",2,"border","#000000 solid","min-width","200px","float","left !important","padding","4px"],[1,"printDiv",2,"min-width","100px","max-width","100px !important","float","left !important","font-size","xx-small !important"],[2,"border","#000000 solid","text-align","right"],[1,"printDiv",2,"border","1px solid black !important","min-width","100px","float","left !important","text-align","right"],["alt","",2,"height","65px","width","40px","border","#000000 solid",3,"src"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h3")(2,"u"),e._uU(3,"Create Booth"),e.qZA()(),e.TgZ(4,"div")(5,"mat-stepper",1,2)(7,"mat-step",3)(8,"form",4),e.YNc(9,R,1,0,"ng-template",5),e.TgZ(10,"div",6)(11,"div")(12,"div")(13,"mat-form-field",7)(14,"mat-label"),e._uU(15,"NAME"),e.qZA(),e._UZ(16,"input",8),e.qZA(),e.TgZ(17,"mat-form-field",7)(18,"mat-label"),e._uU(19,"AGE"),e.qZA(),e._UZ(20,"input",9),e.qZA(),e.TgZ(21,"mat-form-field",7)(22,"mat-label"),e._uU(23,"GENDER"),e.qZA(),e.TgZ(24,"mat-select",10),e.YNc(25,E,2,2,"mat-option",11),e.qZA()()(),e.TgZ(26,"div")(27,"mat-form-field",7)(28,"mat-label"),e._uU(29,"EMAIL"),e.qZA(),e._UZ(30,"input",12),e.qZA()(),e._UZ(31,"div")(32,"div"),e.qZA(),e.TgZ(33,"div",13)(34,"mat-menu",null,14)(36,"input",15),e.NdJ("change",function(p){return o.onChange(p)}),e.qZA()()()(),e.TgZ(37,"div")(38,"button",16),e.NdJ("click",function(){return o.clearForms()}),e._uU(39,"Clear"),e.qZA(),e.YNc(40,J,2,0,"button",17),e.YNc(41,D,2,0,"button",17),e.qZA()()()()(),e.TgZ(42,"div",18)(43,"div",19)(44,"table",20)(45,"thead")(46,"tr")(47,"th",21),e._uU(48,"#"),e.qZA(),e.YNc(49,G,2,0,"th",22),e.TgZ(50,"th",21),e._uU(51,"Email"),e.qZA(),e.YNc(52,L,2,0,"th",22),e.YNc(53,Y,2,0,"th",22),e.YNc(54,H,2,0,"th",22),e.YNc(55,Q,2,0,"th",22),e.qZA()(),e.YNc(56,X,11,7,"tbody",23),e.qZA()()()(),e.TgZ(57,"div")(58,"button",24)(59,"mat-icon"),e._uU(60,"print"),e.qZA()(),e.TgZ(61,"button",25),e.NdJ("click",function(){return o.exportexcel()}),e._uU(62,"Export to Excel"),e.qZA()(),e.TgZ(63,"div",26)(64,"div",27),e.YNc(65,W,16,8,"div",28),e.qZA()()),2&t&&(e.Q6J("hidden",o.showBill),e.xp6(5),e.Q6J("linear",o.isLinear),e.xp6(2),e.Q6J("stepControl",o.personForm),e.xp6(1),e.Q6J("formGroup",o.personForm),e.xp6(17),e.Q6J("ngForOf",o.genderList),e.xp6(11),e.Q6J("disabled",1==o.isUpdateAble),e.xp6(4),e.Q6J("ngIf",0==o.isUpdateAble),e.xp6(1),e.Q6J("ngIf",1==o.isUpdateAble),e.xp6(8),e.Q6J("ngIf",1==o.showName),e.xp6(3),e.Q6J("ngIf",1==o.showMemberCode),e.xp6(1),e.Q6J("ngIf",1==o.showAge),e.xp6(1),e.Q6J("ngIf",1==o.showGender),e.xp6(1),e.Q6J("ngIf",1==o.showPollingNumber),e.xp6(1),e.Q6J("ngForOf",o.volunteerByPolingAgent),e.xp6(2),e.Q6J("printStyle",o.printDivStyle),e.xp6(5),e.Q6J("hidden",!o.showBill),e.xp6(2),e.Q6J("ngForOf",o.volunteerByPolingAgent))},dependencies:[f.sg,f.O5,i._Y,i.Fj,i.JJ,i.JL,i.Q7,c.KE,c.hX,i.sg,i.u,w.Nt,b.gD,S.ey,g.C0,g.VY,g.Vq,v.VK,x.Hw,P.lW,T.I],styles:[".scroll[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.scroll[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}.mat-stepper-horizontal[_ngcontent-%COMP%]{margin-top:8px}.mat-mdc-form-field[_ngcontent-%COMP%]{margin-top:16px}.mat-form-field[_ngcontent-%COMP%]{padding:5px}.printDiv[_ngcontent-%COMP%]{border:1px solid black!important;min-width:200px;float:left!important}input[_ngcontent-%COMP%]{text-transform:uppercase}@media print{.printDiv[_ngcontent-%COMP%]{border:1px solid black!important;min-width:200px;float:left!important}}"]}),n})()}];let te=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[A.Bz.forChild(ee),A.Bz]}),n})();var Z=s(3546),U=s(8796),oe=s(6709);let ie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[f.ez,te,i.u5,c.lN,i.UX,w.c,b.LD,Z.QW,U.A0,i.u5,c.lN,i.UX,w.c,b.LD,Z.QW,U.A0,oe.p9,g.T5,v.Tx,S.Ng,x.Ps,P.ot,T.K]}),n})()}}]);