"use strict";(self.webpackChunkadminDesign=self.webpackChunkadminDesign||[]).push([[488],{4488:(et,b,s)=>{s.r(b),s.d(b,{AssemblyConstituencyModule:()=>tt});var g=s(6895),w=s(3060),n=s(4006),T=s(5226),h=s.n(T),C=s(3561),u=s(5239),Z=s(2340),t=s(4650),U=s(3761),O=s(5683),M=s(9366),_=s(4543),f=s(9549),I=s(4144),A=s(4385),N=s(3238),c=s(6257),y=s(8255),v=s(7392),S=s(4859),x=s(6186);function F(i,r){1&i&&t._uU(0,"Fill out your name")}function P(i,r){if(1&i&&(t.TgZ(0,"mat-option",31),t._uU(1),t.qZA()),2&i){const o=r.$implicit;t.Q6J("value",o),t.xp6(1),t.Oqu(o)}}function B(i,r){if(1&i&&(t.TgZ(0,"mat-option",31),t._uU(1),t.qZA()),2&i){const o=r.$implicit;t.Q6J("value",o.pollingStationId),t.xp6(1),t.Oqu(o.pollingNumber)}}function q(i,r){if(1&i){const o=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.onSubmit())}),t._uU(1,"Submit"),t.qZA()}}function E(i,r){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Name"),t.qZA())}function R(i,r){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Age"),t.qZA())}function J(i,r){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Gender"),t.qZA())}function L(i,r){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Email"),t.qZA())}function D(i,r){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const o=t.oxw().$implicit;t.xp6(1),t.Oqu(o.personName)}}function G(i,r){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const o=t.oxw().$implicit;t.xp6(1),t.Oqu(o.age)}}function H(i,r){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const o=t.oxw().$implicit;t.xp6(1),t.Oqu(o.gender)}}function Q(i,r){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const o=t.oxw().$implicit;t.xp6(1),t.Oqu(o.email)}}function Y(i,r){if(1&i){const o=t.EpF();t.TgZ(0,"tbody")(1,"tr",33),t.NdJ("dblclick",function(){const d=t.CHM(o).$implicit,p=t.oxw();return t.KtG(p.editVoters(d))}),t.TgZ(2,"td",34),t._uU(3),t.qZA(),t.YNc(4,D,2,1,"td",35),t.TgZ(5,"td",34),t._uU(6),t.qZA(),t.YNc(7,G,2,1,"td",35),t.YNc(8,H,2,1,"td",35),t.YNc(9,Q,2,1,"td",35),t.qZA()()}if(2&i){const o=r.$implicit,e=r.index,a=t.oxw();t.xp6(3),t.Oqu(e+1),t.xp6(1),t.Q6J("ngIf",1==a.showName),t.xp6(2),t.Oqu(o.email),t.xp6(1),t.Q6J("ngIf",1==a.showAge),t.xp6(1),t.Q6J("ngIf",1==a.showGender),t.xp6(1),t.Q6J("ngIf",1==a.showEmail)}}function V(i,r){if(1&i&&(t.TgZ(0,"div",36)(1,"div",37)(2,"div",38),t._uU(3),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA(),t._UZ(6,"br"),t._uU(7),t._UZ(8,"br"),t._uU(9),t._UZ(10,"br"),t._uU(11),t.qZA(),t.TgZ(12,"div",39)(13,"div"),t._uU(14),t.qZA(),t._UZ(15,"img",40),t.qZA()()),2&i){const o=r.$implicit,e=r.index,a=t.oxw();t.xp6(3),t.Oqu(e+1),t.xp6(2),t.hij("Name: ",o.personName,""),t.xp6(2),t.hij(" Guardian's Name: ",o.guardianName,""),t.xp6(2),t.AsE(" Age: ",o.age," Gender: ",o.gender,""),t.xp6(2),t.hij(" House No: ",o.houseNo," "),t.xp6(3),t.Oqu(o.voterId),t.xp6(1),t.Q6J("src",a.imageSrcVoter+""+o.personId+".jpg",t.LSH)}}let k=(()=>{class i{constructor(o,e,a,d){this.areaService=o,this.pollingStationService=e,this.authService=a,this.userRegistrationService=d,this.showBill=!1,this.isLinear=!1,this.genderList=["MALE","FEMALE","OTHERS"],this.isUpdateAble=!1,this.imageSrc="",this.imageSrcVoter="",this.imageSrcTable="",this.defaultPicture="",this.userForm=new n.nJ({id:new n.p4(null),personId:new n.p4(null,[n.kI.required]),parentId:new n.p4(null,[n.kI.required]),areaId:new n.p4(null),remark:new n.p4(null,[n.kI.required]),areaDescription:new n.p4(null,[n.kI.required]),email:new n.p4(null,[n.kI.required]),password:new n.p4(null,[n.kI.required])}),this.confirmation=["YES","NO"],this.cast=["GENERAL","ST","SC","OBC"],this.religion=["HINDUISM","CHRISTIANITY","JUDAISM","BUDDHISM","SIKHISM","SHINTO","CATHOLICISM","BAHAI FAITH","ZOROASTRIANISM","JAINISM","CONFUCIANISM","LUTHERANISM","PROTESTANTISM","TAOISM","RASTAFARI","EASTERN ORTHODOX CHURCH","SUNNI ISLAM","CHINESE FOLK RELIGION","BABISM","MODERN PAGANISM","SHIA ISLAM","WICCA","TRADITIONAL AFRICAN RELIGIONS"],this.showPhoto=!0,this.showName=!0,this.showMemberCode=!1,this.showGuardianName=!0,this.showAge=!0,this.showGender=!0,this.showPoliceStation=!1,this.showOcupation=!0,this.showReligion=!0,this.showEmail=!1,this.showMobileOne=!0,this.showMobileTwo=!1,this.showVoterId=!0,this.showAadharId=!0,this.showCast=!1,this.showPostOffice=!1,this.showHouseNo=!0,this.showRoadNo=!0,this.showPinCode=!1,this.showPollingNumber=!1,this.personForm=new n.nJ({personTypeId:new n.p4(null,[n.kI.required]),personName:new n.p4(null,[n.kI.required]),email:new n.p4(""),age:new n.p4(""),gender:new n.p4(null,[n.kI.required]),pollingStationId:new n.p4("")}),this.pollingMembers=[],this.BASE_PUBLIC_URL=Z.N.BASE_PUBLIC_URL,this.PolingAgentByAssembly=[],this.printDivStyle={printBillDiv:{marginRight:"3px",marginLeft:"3px",marginTop:"5px"},table:{"border-collapse":"collapse",width:"100%"},label:{width:"100%"},div:{border:"1px  solid black"}},this.areaService.getStateListener().subscribe(p=>{this.states=p}),this.states=this.areaService.getstate(),this.defaultPicture=this.BASE_PUBLIC_URL+"/profile_pic/no_dp.png",this.imageSrcVoter=this.BASE_PUBLIC_URL+"/voter_pic/"}ngOnInit(){this.showBill=!1,this.loggedInUser=this.authService.userBehaviorSubject.value,this.pollingStationService.getPollingStationByAssemblyId(this.loggedInUser?.assemblyConstituencyId).subscribe(o=>{this.pollingStations=o.data}),this.userRegistrationService.getPolingAgentByAssembly(this.loggedInUser.uniqueId).subscribe(o=>{this.PolingAgentByAssembly=o.data})}exportexcel(){let o=document.getElementById("excel-table");const e=u.utils.table_to_sheet(o),a=u.utils.book_new();u.utils.book_append_sheet(a,e,"Sheet1"),u.writeFile(a,"test.xlsx")}clearForms(){this.personForm.reset(),this.userForm.reset(),this.file=File,this.isUpdateAble=!1}onSubmit(){h().fire({title:"Confirmation",text:"Do you sure to create user?",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, create It!"}).then(o=>{if(o.isConfirmed){const e=this.personForm.value,p=(new C.V).appendStr("1234").end(),l=new FormData;l.append("personTypeId",7),l.append("personName",e.personName),l.append("age",e.age),l.append("gender",e.gender),l.append("email",e.email),l.append("password",p),l.append("pollingStationId",e.pollingStationId),l.append("parentId",this.loggedInUser?.uniqueId),this.userRegistrationService.saveNewPollingByAssembly(l).subscribe(m=>{m.status?(this.voters=m.data,this.personForm.reset(),this.userForm.reset(),this.file=File,this.imageSrc=null,h().fire({position:"top-end",icon:"success",title:"User created",showConfirmButton:!1,timer:1e3}),this.PolingAgentByAssembly.unshift(m.data)):h().fire({position:"top-end",icon:"error",title:"Validation error",showConfirmButton:!1,timer:3e3})},m=>{console.log(m),console.log("data saving error",m)})}})}updateMember(){h().fire({title:"Confirmation",text:"Do you sure to create user?",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, create It!"}).then(o=>{if(o.isConfirmed){const e=this.personForm.value,p=(new C.V).appendStr("1234").end();this.userRegistrationService.updateExistingUser({personId:e.id,personTypeId:6,personName:e.personName,age:e.age,gender:e.gender,religion:e.religion,occupation:e.occupation,policeStation:e.policeStation,cast:e.cast,partNo:e.partNo,postOffice:e.postOffice,houseNo:e.houseNo,guardianName:e.guardianName,aadharId:e.aadharId,state:e.state,district:e.district,pinCode:e.pinCode,preferableCandidate:e.preferableCandidate,satisfiedByPresentGov:e.satisfiedByPresentGov,suggestion:e.suggestion,previousVotingHistory:e.prevVotingHistory,email:e.email,password:p,mobile1:e.mobile1,mobile2:e.mobile2,voterId:e.voterId,pollingStationId:e.pollingStationId,parentId:this.loggedInUser?.uniqueId,remark:this.userForm.value.remark,roadName:e.roadName}).subscribe(m=>{})}})}editVoters(o){this.personForm.patchValue({id:o.id,personName:o.personName,age:o.age,gender:o.gender,email:o.email,pollingStationId:o.pollingNumber,remark:o.remark}),this.imageSrc=this.imageSrcVoter+""+o.id+".jpg",this.isUpdateAble=!0}onChange(o){if(o.target.files[0].size/1024e3>2)return h().fire({position:"top-end",icon:"error",title:"Photo must be less than 2 mb",showConfirmButton:!1,timer:3e3}),void(this.file=File);this.file=o.target.files[0];var e=new FileReader;e.readAsDataURL(this.file),e.onload=a=>{this.imageSrc=e.result}}viewBill(){this.showBill=!this.showBill}changeShowStatus(o,e){this.showName="showName"===o?e:this.showName,this.showAge="showAge"===o?e:this.showAge,this.showEmail="showEmail"===o?e:this.showEmail,this.showMemberCode="showMemberCode"===o?e:this.showMemberCode,this.showGuardianName="showGuardianName"===o?e:this.showGuardianName,this.showGender="showGender"===o?e:this.showGender,this.showPoliceStation="showPoliceStation"===o?e:this.showPoliceStation,this.showOcupation="showOcupation"===o?e:this.showOcupation,this.showReligion="showReligion"===o?e:this.showReligion,this.showMobileOne="showMobileOne"===o?e:this.showMobileOne,this.showMobileTwo="showMobileTwo"===o?e:this.showMobileTwo,this.showVoterId="showVoterId"===o?e:this.showVoterId,this.showAadharId="showAadharId"===o?e:this.showAadharId,this.showCast="showCast"===o?e:this.showCast,this.showPostOffice="showPostOffice"===o?e:this.showPostOffice,this.showHouseNo="showHouseNo"===o?e:this.showHouseNo,this.showRoadNo="showRoadNo"===o?e:this.showRoadNo,this.showPinCode="showPinCode"===o?e:this.showPinCode,this.showPollingNumber="showPollingNumber"===o?e:this.showPollingNumber,this.showPhoto="showPhoto"===o?e:this.showPhoto}}return i.\u0275fac=function(o){return new(o||i)(t.Y36(U.T),t.Y36(O.u),t.Y36(M.e),t.Y36(_.p))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-assembly-constituency"]],decls:69,vars:16,consts:[[1,"container","pt-1",2,"background-color","rgb(255, 255, 255)","color","black !important",3,"hidden"],[2,"background-color","rgb(31, 111, 180) !important","color","black !important","border-radius","10px",3,"linear"],["stepper",""],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],[1,"d-flex"],[1,"col-9"],["appearance","fill"],["matInput","","placeholder","Last name, First name","formControlName","personName","required",""],["matInput","","placeholder","Your age","formControlName","age","required",""],["matInput","","placeholder","Email","formControlName","email","required",""],["matNativeControl","","required","","formControlName","gender"],[3,"value",4,"ngFor","ngForOf"],["matNativeControl","","required","","formControlName","pollingStationId"],[1,"fluid",2,"background-color","white","max-height","100px","margin","2%","text-align","right"],["test1","matMenu"],["type","file","name","filename",3,"disabled","change"],[1,"mr-2","bg-warning","btn",3,"click"],["type","submit","class","btn btn-info",3,"click",4,"ngIf"],[1,"card"],[1,"card-body","scroll",2,"max-width","100vw","overflow","scroll","border-radius","5px","background-color","rgba(27, 109, 197, 0.524)"],["id","excel-table",1,"table"],["scope","col",1,"text-center"],["class","text-center","scope","col",4,"ngIf"],[4,"ngFor","ngForOf"],["mat-stroked-button","","printSectionId","printDiv","ngxPrint","",1,"btn-primary",3,"printStyle"],["mat-stroked-button","",1,"btn-primary",3,"click"],[3,"hidden"],["id","printDiv",2,"font-size","xx-small !important"],["class","printDiv","style","border: #000000 solid; min-width: 200px; float: left !important; padding: 4px;",4,"ngFor","ngForOf"],[3,"value"],["type","submit",1,"btn","btn-info",3,"click"],[3,"dblclick"],["scope","row",1,"text-center","pt-3"],["class","text-center pt-3","scope","row",4,"ngIf"],[1,"printDiv",2,"border","#000000 solid","min-width","200px","float","left !important","padding","4px"],[1,"printDiv",2,"min-width","100px","max-width","100px !important","float","left !important","font-size","xx-small !important"],[2,"border","#000000 solid","text-align","right"],[1,"printDiv",2,"border","1px solid black !important","min-width","100px","float","left !important","text-align","right"],["alt","",2,"height","65px","width","40px","border","#000000 solid",3,"src"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"h3")(2,"u"),t._uU(3,"Create Polling Volunteer"),t.qZA()(),t.TgZ(4,"div")(5,"mat-stepper",1,2)(7,"mat-step",3)(8,"form",4),t.YNc(9,F,1,0,"ng-template",5),t.TgZ(10,"div",6)(11,"div",7)(12,"div")(13,"mat-form-field",8)(14,"mat-label"),t._uU(15,"NAME"),t.qZA(),t._UZ(16,"input",9),t.qZA(),t.TgZ(17,"mat-form-field",8)(18,"mat-label"),t._uU(19,"AGE"),t.qZA(),t._UZ(20,"input",10),t.qZA()(),t.TgZ(21,"div")(22,"mat-form-field",8)(23,"mat-label"),t._uU(24,"EMAIL"),t.qZA(),t._UZ(25,"input",11),t.qZA(),t.TgZ(26,"mat-form-field",8)(27,"mat-label"),t._uU(28,"GENDER"),t.qZA(),t.TgZ(29,"mat-select",12),t.YNc(30,P,2,2,"mat-option",13),t.qZA()()(),t.TgZ(31,"div")(32,"mat-form-field",8)(33,"mat-label"),t._uU(34,"POLLING NO."),t.qZA(),t.TgZ(35,"mat-select",14),t.YNc(36,B,2,2,"mat-option",13),t.qZA()()(),t._UZ(37,"div"),t.qZA(),t.TgZ(38,"div",15)(39,"mat-menu",null,16)(41,"input",17),t.NdJ("change",function(d){return e.onChange(d)}),t.qZA()()()(),t.TgZ(42,"div")(43,"button",18),t.NdJ("click",function(){return e.clearForms()}),t._uU(44,"Clear"),t.qZA(),t.YNc(45,q,2,0,"button",19),t.qZA()()()()(),t.TgZ(46,"div",20)(47,"div",21)(48,"table",22)(49,"thead")(50,"tr")(51,"th",23),t._uU(52,"#"),t.qZA(),t.YNc(53,E,2,0,"th",24),t.TgZ(54,"th",23),t._uU(55,"Email"),t.qZA(),t.YNc(56,R,2,0,"th",24),t.YNc(57,J,2,0,"th",24),t.YNc(58,L,2,0,"th",24),t.qZA()(),t.YNc(59,Y,10,6,"tbody",25),t.qZA()()()(),t.TgZ(60,"div")(61,"button",26)(62,"mat-icon"),t._uU(63,"print"),t.qZA()(),t.TgZ(64,"button",27),t.NdJ("click",function(){return e.exportexcel()}),t._uU(65,"Export to Excel"),t.qZA()(),t.TgZ(66,"div",28)(67,"div",29),t.YNc(68,V,16,8,"div",30),t.qZA()()),2&o&&(t.Q6J("hidden",e.showBill),t.xp6(5),t.Q6J("linear",e.isLinear),t.xp6(2),t.Q6J("stepControl",e.personForm),t.xp6(1),t.Q6J("formGroup",e.personForm),t.xp6(22),t.Q6J("ngForOf",e.genderList),t.xp6(6),t.Q6J("ngForOf",e.pollingStations),t.xp6(5),t.Q6J("disabled",1==e.isUpdateAble),t.xp6(4),t.Q6J("ngIf",0==e.isUpdateAble),t.xp6(8),t.Q6J("ngIf",1==e.showName),t.xp6(3),t.Q6J("ngIf",1==e.showAge),t.xp6(1),t.Q6J("ngIf",1==e.showGender),t.xp6(1),t.Q6J("ngIf",1==e.showEmail),t.xp6(1),t.Q6J("ngForOf",e.PolingAgentByAssembly),t.xp6(2),t.Q6J("printStyle",e.printDivStyle),t.xp6(5),t.Q6J("hidden",!e.showBill),t.xp6(2),t.Q6J("ngForOf",e.PolingAgentByAssembly))},dependencies:[g.sg,g.O5,n._Y,n.Fj,n.JJ,n.JL,n.Q7,f.KE,f.hX,n.sg,n.u,I.Nt,A.gD,N.ey,c.C0,c.VY,c.Vq,y.VK,v.Hw,S.lW,x.I],styles:[".scroll[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.scroll[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}.mat-stepper-horizontal[_ngcontent-%COMP%]{margin-top:8px}.mat-mdc-form-field[_ngcontent-%COMP%]{margin-top:16px}.mat-form-field[_ngcontent-%COMP%]{padding:5px}input[_ngcontent-%COMP%]{text-transform:uppercase}"]}),i})();const $=[{path:"",canActivate:[s(6300).c],component:k}];let z=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[w.Bz.forChild($),w.Bz]}),i})();var K=s(3546),X=s(8796),W=s(6709);let tt=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[g.ez,z,n.u5,f.lN,n.UX,I.c,A.LD,K.QW,X.A0,W.p9,c.T5,y.Tx,A.LD,N.Ng,v.Ps,S.ot,x.K]}),i})()}}]);