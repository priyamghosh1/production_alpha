"use strict";(self.webpackChunkadminDesign=self.webpackChunkadminDesign||[]).push([[260],{8818:(j,A,s)=>{s.r(A),s.d(A,{DistrictAdminPanelModule:()=>z});var g=s(6895),b=s(3060),n=s(4006),S=s(5226),c=s.n(S),I=s(3561),u=s(5239),T=s(2340),t=s(4650),P=s(3761),Z=s(5683),D=s(9366),U=s(4543),f=s(9549),C=s(4144),w=s(4385),N=s(3238),p=s(6257),v=s(8255);function M(i,r){1&i&&t._uU(0,"Fill out your name")}function O(i,r){if(1&i&&(t.TgZ(0,"mat-option",26),t._uU(1),t.qZA()),2&i){const o=r.$implicit;t.Q6J("value",o),t.xp6(1),t.Oqu(o)}}function x(i,r){if(1&i&&(t.TgZ(0,"mat-option",26),t._uU(1),t.qZA()),2&i){const o=r.$implicit;t.Q6J("value",o.assemblyId),t.xp6(1),t.Oqu(o.assemblyName)}}function F(i,r){if(1&i){const o=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.onSubmit())}),t._uU(1,"Submit"),t.qZA()}}function B(i,r){if(1&i){const o=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.updateMember())}),t._uU(1,"Update"),t.qZA()}}function R(i,r){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Name"),t.qZA())}function y(i,r){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Age"),t.qZA())}function E(i,r){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Gender"),t.qZA())}function _(i,r){if(1&i&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&i){const o=t.oxw().$implicit;t.xp6(1),t.Oqu(o.personName)}}function q(i,r){if(1&i&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&i){const o=t.oxw().$implicit;t.xp6(1),t.Oqu(o.age)}}function J(i,r){if(1&i&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&i){const o=t.oxw().$implicit;t.xp6(1),t.Oqu(o.gender)}}function L(i,r){if(1&i){const o=t.EpF();t.TgZ(0,"tbody"),t._UZ(1,"tr"),t.TgZ(2,"tr",28),t.NdJ("dblclick",function(){const d=t.CHM(o).$implicit,m=t.oxw();return t.KtG(m.editAssemblyVolunteer(d))}),t.TgZ(3,"td",29),t._uU(4),t.qZA(),t.YNc(5,_,2,1,"td",30),t.TgZ(6,"td",29),t._uU(7),t.qZA(),t.YNc(8,q,2,1,"td",30),t.YNc(9,J,2,1,"td",30),t.qZA()()}if(2&i){const o=r.$implicit,e=r.index,a=t.oxw();t.xp6(4),t.Oqu(e+1),t.xp6(1),t.Q6J("ngIf",1==a.showName),t.xp6(2),t.Oqu(o.email),t.xp6(1),t.Q6J("ngIf",1==a.showAge),t.xp6(1),t.Q6J("ngIf",1==a.showGender)}}const G=[{path:"",component:(()=>{class i{constructor(o,e,a,d){this.areaService=o,this.pollingStationService=e,this.authService=a,this.userRegistrationService=d,this.showBill=!1,this.isLinear=!1,this.genderList=["MALE","FEMALE","OTHERS"],this.isUpdateAble=!1,this.imageSrc="",this.imageSrcVoter="",this.imageSrcTable="",this.defaultPicture="",this.userForm=new n.nJ({id:new n.p4(null),personId:new n.p4(null,[n.kI.required]),parentId:new n.p4(null,[n.kI.required]),areaId:new n.p4(null),remark:new n.p4(null,[n.kI.required]),areaDescription:new n.p4(null,[n.kI.required]),email:new n.p4(null,[n.kI.required]),password:new n.p4(null,[n.kI.required])}),this.confirmation=["YES","NO"],this.cast=["GENERAL","ST","SC","OBC"],this.religion=["HINDUISM","CHRISTIANITY","JUDAISM","BUDDHISM","SIKHISM","SHINTO","CATHOLICISM","BAHAI FAITH","ZOROASTRIANISM","JAINISM","CONFUCIANISM","LUTHERANISM","PROTESTANTISM","TAOISM","RASTAFARI","EASTERN ORTHODOX CHURCH","SUNNI ISLAM","CHINESE FOLK RELIGION","BABISM","MODERN PAGANISM","SHIA ISLAM","WICCA","TRADITIONAL AFRICAN RELIGIONS"],this.showPhoto=!0,this.showName=!0,this.showMemberCode=!1,this.showGuardianName=!0,this.showAge=!0,this.showGender=!0,this.showPoliceStation=!1,this.showOcupation=!0,this.showReligion=!0,this.showEmail=!1,this.showMobileOne=!0,this.showMobileTwo=!1,this.showVoterId=!0,this.showAadharId=!0,this.showCast=!1,this.showPostOffice=!1,this.showHouseNo=!0,this.showRoadNo=!0,this.showPinCode=!1,this.showPollingNumber=!1,this.assembly=[],this.assemblyVolunteer=[],this.personForm=new n.nJ({personTypeId:new n.p4(null,[n.kI.required]),personName:new n.p4(null,[n.kI.required]),age:new n.p4(""),gender:new n.p4(null,[n.kI.required]),email:new n.p4(""),district:new n.p4(null,[n.kI.required]),assembly:new n.p4(null,[n.kI.required])}),this.pollingMembers=[],this.BASE_PUBLIC_URL=T.N.BASE_PUBLIC_URL,this.printDivStyle={printBillDiv:{marginRight:"3px",marginLeft:"3px",marginTop:"5px"},table:{"border-collapse":"collapse",width:"100%"},label:{width:"100%"},div:{border:"1px  solid black"}},this.areaService.getStateListener().subscribe(m=>{this.states=m}),this.states=this.areaService.getstate(),this.defaultPicture=this.BASE_PUBLIC_URL+"/profile_pic/no_dp.png",this.imageSrcVoter=this.BASE_PUBLIC_URL+"/voter_pic/"}ngOnInit(){this.showBill=!1,this.loggedInUser=this.authService.userBehaviorSubject.value,this.pollingStationService.getPollingStationByAssemblyId(this.loggedInUser?.assemblyConstituencyId).subscribe(o=>{this.pollingStations=o.data}),this.userRegistrationService.getAssemblyVolunteerByDistrictAdmin(this.loggedInUser.uniqueId).subscribe(o=>{this.assemblyVolunteer=o.data,console.log(this.assemblyVolunteer)}),this.areaService.getAssemblyByDistrictId(4).subscribe(o=>{this.assembly=o.data})}exportexcel(){let o=document.getElementById("excel-table");const e=u.utils.table_to_sheet(o),a=u.utils.book_new();u.utils.book_append_sheet(a,e,"Sheet1"),u.writeFile(a,"test.xlsx")}clearForms(){this.personForm.reset(),this.userForm.reset(),this.isUpdateAble=!1}onSubmit(){c().fire({title:"Confirmation",text:"Do you sure to create user?",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, create It!"}).then(o=>{if(o.isConfirmed){const e=this.personForm.value,m=(new I.V).appendStr("1234").end(),l=new FormData;l.append("personTypeId",6),l.append("personName",e.personName),l.append("age",e.age),l.append("gender",e.gender),l.append("email",e.email),l.append("password",m),l.append("parentId",this.loggedInUser?.uniqueId),l.append("assemblyConstituencyId",e.assembly),this.userRegistrationService.saveNewAssemblyByDistrictAdmin(l).subscribe(h=>{h.status?(this.personForm.reset(),this.userForm.reset(),c().fire({position:"top-end",icon:"success",title:"User created",showConfirmButton:!1,timer:1e3}),this.assemblyVolunteer.unshift(h.data)):c().fire({position:"top-end",icon:"error",title:"Validation error",showConfirmButton:!1,timer:3e3})},h=>{console.log(h),console.log("data saving error",h)})}})}updateMember(){c().fire({title:"Confirmation",text:"Do you sure to create user?",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, create It!"}).then(o=>{if(o.isConfirmed){const e=this.personForm.value,m=(new I.V).appendStr("1234").end();this.userRegistrationService.updateExistingUser({personId:e.id,personTypeId:6,personName:e.personName,age:e.age,gender:e.gender,religion:e.religion,occupation:e.occupation,policeStation:e.policeStation,cast:e.cast,partNo:e.partNo,postOffice:e.postOffice,houseNo:e.houseNo,guardianName:e.guardianName,aadharId:e.aadharId,state:e.state,district:e.district,pinCode:e.pinCode,preferableCandidate:e.preferableCandidate,satisfiedByPresentGov:e.satisfiedByPresentGov,suggestion:e.suggestion,previousVotingHistory:e.prevVotingHistory,email:e.email,password:m,mobile1:e.mobile1,mobile2:e.mobile2,voterId:e.voterId,pollingStationId:e.pollingStationId,parentId:this.loggedInUser?.uniqueId,remark:this.userForm.value.remark,roadName:e.roadName}).subscribe(h=>{})}})}editAssemblyVolunteer(o){console.log("test",o),this.personForm.patchValue({id:o.id,personName:o.personName,age:o.age,gender:o.gender,email:o.email,assembly:o.assemblyConstituencyId}),console.log(this.personForm),this.isUpdateAble=!0}onChange(o){if(o.target.files[0].size/1024e3>2)return c().fire({position:"top-end",icon:"error",title:"Photo must be less than 2 mb",showConfirmButton:!1,timer:3e3}),void(this.file=File);this.file=o.target.files[0];var e=new FileReader;e.onload=a=>{this.imageSrc=e.result}}viewBill(){this.showBill=!this.showBill}changeShowStatus(o,e){this.showName="showName"===o?e:this.showName,this.showAge="showAge"===o?e:this.showAge,this.showEmail="showEmail"===o?e:this.showEmail,this.showMemberCode="showMemberCode"===o?e:this.showMemberCode,this.showGuardianName="showGuardianName"===o?e:this.showGuardianName,this.showGender="showGender"===o?e:this.showGender,this.showPoliceStation="showPoliceStation"===o?e:this.showPoliceStation,this.showOcupation="showOcupation"===o?e:this.showOcupation,this.showReligion="showReligion"===o?e:this.showReligion,this.showMobileOne="showMobileOne"===o?e:this.showMobileOne,this.showMobileTwo="showMobileTwo"===o?e:this.showMobileTwo,this.showVoterId="showVoterId"===o?e:this.showVoterId,this.showAadharId="showAadharId"===o?e:this.showAadharId,this.showCast="showCast"===o?e:this.showCast,this.showPostOffice="showPostOffice"===o?e:this.showPostOffice,this.showHouseNo="showHouseNo"===o?e:this.showHouseNo,this.showRoadNo="showRoadNo"===o?e:this.showRoadNo,this.showPinCode="showPinCode"===o?e:this.showPinCode,this.showPollingNumber="showPollingNumber"===o?e:this.showPollingNumber,this.showPhoto="showPhoto"===o?e:this.showPhoto}}return i.\u0275fac=function(o){return new(o||i)(t.Y36(P.T),t.Y36(Z.u),t.Y36(D.e),t.Y36(U.p))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-district-admin-panel"]],decls:58,vars:13,consts:[[1,"container","pt-1",2,"background-color","rgba(255, 255, 255, 0)","color","black !important",3,"hidden"],[2,"background-color","rgb(7, 138, 182) !important","color","black !important","border-radius","10px",3,"linear"],["stepper",""],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],[1,"d-flex"],[1,"col-9"],["appearance","fill"],["matInput","","placeholder","Last name, First name","formControlName","personName","required",""],["matInput","","placeholder","Your age","formControlName","age","required",""],["matNativeControl","","required","","formControlName","gender"],[3,"value",4,"ngFor","ngForOf"],["matNativeControl","","required","","formControlName","assembly"],["matInput","","placeholder","Email","formControlName","email","required",""],[1,"fluid",2,"background-color","white","max-height","100px","margin","2%","text-align","right"],["test1","matMenu"],["type","file","name","filename",3,"disabled","change"],[1,"mr-2","bg-warning","btn",3,"click"],["type","submit","class","btn btn-info",3,"click",4,"ngIf"],[1,"card"],[1,"card-body","scroll",2,"max-width","100vw","overflow","scroll","border-radius","5px","background-color","rgba(27, 109, 197, 0.524)"],[1,"table"],["scope","col",1,"text-center"],["class","text-center","scope","col",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"value"],["type","submit",1,"btn","btn-info",3,"click"],[3,"dblclick"],["scope","row",1,"text-center","pt-3"],["class","text-center pt-3","scope","row",4,"ngIf"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"h3")(2,"u"),t._uU(3,"Create Polling Volunteer"),t.qZA()(),t.TgZ(4,"div")(5,"mat-stepper",1,2)(7,"mat-step",3)(8,"form",4),t.YNc(9,M,1,0,"ng-template",5),t.TgZ(10,"div",6)(11,"div",7)(12,"div")(13,"mat-form-field",8)(14,"mat-label"),t._uU(15,"NAME"),t.qZA(),t._UZ(16,"input",9),t.qZA(),t.TgZ(17,"mat-form-field",8)(18,"mat-label"),t._uU(19,"AGE"),t.qZA(),t._UZ(20,"input",10),t.qZA(),t.TgZ(21,"mat-form-field",8)(22,"mat-label"),t._uU(23,"GENDER"),t.qZA(),t.TgZ(24,"mat-select",11),t.YNc(25,O,2,2,"mat-option",12),t.qZA()()(),t.TgZ(26,"div")(27,"mat-form-field",8)(28,"mat-label"),t._uU(29,"ASSEMBLY"),t.qZA(),t.TgZ(30,"mat-select",13),t.YNc(31,x,2,2,"mat-option",12),t.qZA()(),t.TgZ(32,"mat-form-field",8)(33,"mat-label"),t._uU(34,"EMAIL"),t.qZA(),t._UZ(35,"input",14),t.qZA()()(),t.TgZ(36,"div",15)(37,"mat-menu",null,16)(39,"input",17),t.NdJ("change",function(d){return e.onChange(d)}),t.qZA()()()(),t.TgZ(40,"div")(41,"button",18),t.NdJ("click",function(){return e.clearForms()}),t._uU(42,"Clear"),t.qZA(),t.YNc(43,F,2,0,"button",19),t.YNc(44,B,2,0,"button",19),t.qZA()()()()(),t.TgZ(45,"div",20)(46,"div",21)(47,"table",22)(48,"thead")(49,"tr")(50,"th",23),t._uU(51,"#"),t.qZA(),t.YNc(52,R,2,0,"th",24),t.TgZ(53,"th",23),t._uU(54,"Email"),t.qZA(),t.YNc(55,y,2,0,"th",24),t.YNc(56,E,2,0,"th",24),t.qZA()(),t.YNc(57,L,10,5,"tbody",25),t.qZA()()()()),2&o&&(t.Q6J("hidden",e.showBill),t.xp6(5),t.Q6J("linear",e.isLinear),t.xp6(2),t.Q6J("stepControl",e.personForm),t.xp6(1),t.Q6J("formGroup",e.personForm),t.xp6(17),t.Q6J("ngForOf",e.genderList),t.xp6(6),t.Q6J("ngForOf",e.assembly),t.xp6(8),t.Q6J("disabled",1==e.isUpdateAble),t.xp6(4),t.Q6J("ngIf",0==e.isUpdateAble),t.xp6(1),t.Q6J("ngIf",1==e.isUpdateAble),t.xp6(8),t.Q6J("ngIf",1==e.showName),t.xp6(3),t.Q6J("ngIf",1==e.showAge),t.xp6(1),t.Q6J("ngIf",1==e.showGender),t.xp6(1),t.Q6J("ngForOf",e.assemblyVolunteer))},dependencies:[g.sg,g.O5,n._Y,n.Fj,n.JJ,n.JL,n.Q7,f.KE,f.hX,n.sg,n.u,C.Nt,w.gD,N.ey,p.C0,p.VY,p.Vq,v.VK],styles:[".scroll[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.scroll[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}.mat-stepper-horizontal[_ngcontent-%COMP%]{margin-top:8px}.mat-mdc-form-field[_ngcontent-%COMP%]{margin-top:16px}.mat-form-field[_ngcontent-%COMP%]{padding:5px}input[_ngcontent-%COMP%]{text-transform:uppercase}"]}),i})()}];let H=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[b.Bz.forChild(G),b.Bz]}),i})();var Y=s(3546),Q=s(8796),V=s(6709),k=s(7392),K=s(4859),$=s(6186);let z=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[g.ez,H,n.u5,f.lN,n.UX,C.c,w.LD,Y.QW,Q.A0,V.p9,p.T5,v.Tx,w.LD,N.Ng,k.Ps,K.ot,$.K]}),i})()}}]);